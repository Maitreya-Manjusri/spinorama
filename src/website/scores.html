<!DOCTYPE html>
<html lang="en">
  <head>
    <%include file="head.html"/>
  </head>
<body>

<%include file="nav_menu.html"/>

<div class="column py-0 is-12 is-vertical">
  <div class="tile py-0 is-ancestor">
    <div class="tile py-0 is-parent is-3">
      <div class="content mx-0 mt-0 mb-0">
        Brand Model
      </div>
    </div>
    <div class="tile py-0 is-parent is-2">
      <div class="content mx-0 mt-0 mb-0">
        <span class="has-text-left">
          Reviews
        </span>
      </div>
    </div>
    <div class="tile py-0 is-parent is-3">
      <div class="content mt-0 mb-0 mx-0">
        -3dB (Hz) &nbsp;
        Deviation
      </div>
    </div>
    <div class="tile py-0 is-parent is-4">
      <span class="has-text-right mt-0 mb-0 mx-0 is-family-monospace">
        <b>Scores</b>&nbsp;
        <b>w/sub</b>&nbsp;
        <b>w/eq</b>&nbsp;
        <b>w/both</b>&nbsp;
      </span>
    </div>
  </div>
</div>


<%namespace name="util" module="website.utils" import="*"/>

<script id="scoresht" type="text/x-handlebars-template">
  <div class="tile py-0 is-ancestor">
    <div class="tile py-0 is-parent is-3">
      <div class="content mx-0 mt-0 mb-0">
        {{brand}} {{model}}
      </div>
    </div>
    <div class="tile py-0 is-parent is-2">
      <div class="content mx-0 mt-0 mb-0">
        <span class="has-text-left">
          {{#each reviews.reviews}}
	  <a href="{{this.url}}">{{this.origin}}</a>
          {{/each}}
        </span>
      </div>
    </div>
    <div class="tile py-0 is-parent is-3">
      <div class="content mt-0 mb-0 mx-0">
        <b>{{estimates.ref_3dB}}</b>Hz&nbsp;
        &plusmn;<b>{{estimates.ref_band}}</b>dB
      </div>
    </div>
    <div class="tile py-0 is-parent is-4">
      <span class="has-text-right mt-0 mb-0 mx-0 is-family-monospace">
        <b>{{scores.pref_score}}</b>&nbsp;
        - <b>{{scores.pref_score_wsub}}</b>&nbsp;
        - <b>{{scoresEQ.pref_score}}</b>&nbsp;
        - <b>{{scoresEQ.pref_score_wsub}}</b>&nbsp;
      </span>
      <button class="is-small is-info" aria-label="more options" onclick="toggleId('#{{id}}-details');">
        <i class="fas fa-angle-down"></i>
      </button>
    </div>
  </div>
  <div id="{{id}}-details" class="box hidden">
    <div class="tile is-ancestor">
      <div class="tile is-parent is-6">
        <div class="table-container">
          <table class="table is-striped is-narrow">
            <thead>
              <tr class="has-text-right">
                <td>Estimates
                </td>
                <td>Def.
                </td>
                <td>w/EQ
                </td>
                <td>Score components
                </td>
                <td>Def.
                </td>
                <td>w/EQ
                </td>
              </tr>
            </thead>
            <tbody>
              <tr class="has-text-right">
                <td>-3dB v.s. reference:</td>
                <td>{{estimates.ref_3dB}}Hz</td>
                <td>{{estimates_eq.ref_3dB}}Hz</td>
                <td>NBD ON:</td>
                <td>{{scores.nbd_on_axis}}</td>
                <td>{{scores_eq.nbd_on_axis}}</td>
              </tr>
              <tr class="has-text-right">
                <td>-6dB v.s. reference:</td>
                <td>{{estimates.ref_6dB}}Hz</td>
                <td>{{estimates_eq.ref_6dB}}Hz</td>
                <td>NBD LW:</td>
                <td>{{scores.nbd_listening_window}}</td>
                <td>{{scores_eq.nbd_listening_window}}</td>
              </tr>
              <tr class="has-text-right">
                <td>Horizontal Directivity between 1kHz and 10kHz</td>
                <td>[{{estimates.dir_horizontal_m}}째, {{estimates.dir_horizontal_p}}째]</td>
                <td></td>
                <td>LFX:</td>
                <td>{{scores.lfx_hz}}Hz</td>
                <td>{{scores_eq.lfx_hz}}Hz</td>
              </tr>
              <tr class="has-text-right">
                <td>Vertical Directivity between 1kHz and 10kHz</td>
                <td>[{{estimates.dir_vertical_m}}째, {{estimates.dir_vertical_p}}째]</td>
                <td>--</td>
                <td>SM PIR:</td>
                <td>{{scores.sm_pred_in_room}}</td>
                <td>{{scores_eq.sm_pred_in_room}}</td>
              </tr>
              <tr class="has-text-right">
                <td>Deviation between {{estimates.ref_from}}Hz to {{estimates.ref_to}}Hz</td>
                <td>&plusmn;<b>{{estimates.ref_band}}</b>dB</td>
                <td>&plusmn;<b>{{estimates_eq.ref_band}}</b>dB</td>
                <td>SM SP:</td>
                <td>{{scores.sm_sound_power}}</td>
                <td>{{scores_eq.sm_sound_power}}</td>
              </tr>
              <tr class="has-text-right">
                <td>Sensitivity:</td>
                <td>{{sensitity}}dB</td>
                <td></td>
                <td>Score</td>
                <td><b>{{scores.pref_score}}</b></td>
                <td><b>{{scores_eq.pref_score}}</b></td>
              </tr>
              <tr class="has-text-right">
                <td></td>
                <td></td>
                <td></td>
                <td>Score with subwoofer</td>
                <td><b>{{scores.pref_score_wsub}}</b></td>
                <td><b>{{scores_eq.pref_score_wsub}}</b></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tile is-parent is-6">
        <figure>
          <img src="{{spider}}"/>
        </figure>
      </div>
    </div>
  </div>
</div>
</script>

<div class="section">
  <!-- Speakers -->
  <div class="searchresults">
    <div class="columns is-multiline is-1" id="scores" data-num="0">
      <script src='assets/scores.js'></script>
    </div>
  </div>
</div>

<script src="assets/search.js"></script>

<%include file="footer.html"/>
