<!DOCTYPE html>
<html lang="en">
  <head>
    <%include file="head.html"/>
  </head>
  <script>
    Handlebars.registerHelper('ifSplitReviews', function (index, arr, options) {
      if(index>2){
        return options.fn(this);
      } 
    });
  </script>
<body>

<%include file="nav_menu.html"/>

<%namespace name="util" module="website.utils" import="*"/>

<script id="speaker" type="text/x-handlebars-template">
  <div class="card">
      <div class="card-image">
	<picture class="image is-2by3">
          <source srcset="{{img.webp}}" type="image/webp" width="400" height="600"></source>
	  <img src="{{img.jpg}}" loading="{{img.loading}}" decoding="{{img.decoding}}" alt="{{brand}} {{model}}" width="400" height="600"/>
        </picture>
      </div>
      <header class="card-header">
	<p class="card-header-title">{{brand}} {{model}}</p>
      </header>
      <div class="card-content">
	<div class="content is-small">
          <p>Tonality: <b>{{score.score}}</b></p>
          <progress class="progress is-small is-danger" value="{{score.scoreScaled}}" max="100"></progress>
  	  <p>Bass extension: <b>{{score.lfx}}</b>Hz at -6dB</p>
    	  <progress class="progress is-small is-info" value="{{score.lfxScaled}}" max="100"></progress>
	  <p>Flatness: <b>&plusmn;{{score.flatness}}</b>dB ~300-10kHz</p>
	  <progress class="progress is-small is-success" value="{{score.flatnessScaled}}" max="100"></progress>
	  <p>Smoothness (PIR): <b>{{score.smoothness}}</b></p>
	  <progress class="progress is-small is-warning" value="{{score.smoothnessScaled}}" max="100"></progress>
	</div>
      </div>
      <footer class="card-footer">
        {{#each reviews.reviews}}
	<a class="card-footer-item"
	   href="{{this.url}}">{{this.origin}}</a>
        {{#ifSplitReviews index reviews.reviews.length}}
        {{/ifSplitReviews}}
        {{/each}}
      </footer>
    </div>
</script>

<div class="section">
  <!-- Speakers -->
  <div class="searchresults">
    <div class="columns is-multiline is-1" id="speakers" data-num="0">
      <script type="module" src="./assets/index.js"></script>
    </div>
  </div>
</div>

<%include file="search.html"/>
<%include file="footer.html"/>
