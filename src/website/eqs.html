<!DOCTYPE html>
<html lang="en">
  <head>
    <%include file="head.html"/>
  </head>
  <body>
    <%include file="nav_menu.html"/> <%namespace name="util"
    module="website.utils" import="*"/>

    <script>
      Handlebars.registerHelper("isNotEmpty", function (value) {
        return Object.keys(value).length > 0;
      });
    </script>

    <script id="templateEQ" type="text/x-handlebars-template">
      <table class="table">
        <tr>
          <th>
            {{brand}}
            {{model}}
          </th>
        </tr>
        {{#if (isNotEmpty othereq)}}
        <tr>
          <td class="has-text-centered">
            <div class="control">
              <div class="select">
                <select id="eq-select-{{id}}">
                  <option value="{{autoeq.key}}">{{autoeq.name}}</option>
                  {{#each othereq}}
                  <option value="{{key}}">{{name}}</option>
                  {{/each}}
                </select>
              </div>
            </div>
          </td>
        </tr>
        {{/if}}
        <tr id="eq-{{id}}-autoeq">
          <td>
            <table class="table is-striped">
              <thead>
                <tr>
                  <td colspan="4" class="has-text-centered">
                    Set preamp gain to: <b>{{autoeq.preamp_gain}}dB</b>.
                  </td>
                </tr>
                <tr>
                  <th>Type</th>
                  <th>Freq</th>
                  <th>Q</th>
                  <th>Gain</th>
                </tr>
              </thead>
              <tbody>
                {{#each autoeq.peq}}
                <tr>
                    <td>{{this.type}}</td>
                    <td>{{this.freq}}</td>
                    <td>{{this.Q}}</td>
                    <td>{{this.dbGain}}</td>
                  </tr>
                {{/each}}
                <tr>
                  <td colspan="4" class="has-text-centered">
                    <button class="button is-info is-light" id="modal-eq-{{id}}">Details</button>
                    <a class="button is-link is-light" href="{{autoeq.url}}">Download</a>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        {{#if (isNotEmpty othereq)}}
        {{#each othereq}}
        <tr class="hidden" id="eq-{{../id}}-{{this.key}}">
          <td>
            <table class="table is-striped">
              <thead>
                <tr>
                  <td colspan="4" class="has-text-centered">
                    Set preamp gain to: <b>{{this.preamp_gain}}dB</b>.
                  </td>
                </tr>
                <tr>
                  <th>Type</th>
                  <th>Freq</th>
                  <th>Q</th>
                  <th>Gain</th>
                </tr>
              </thead>
              <tbody>
                {{#each this.peq}}
                <tr>
                    <td>{{this.type}}</td>
                    <td>{{this.freq}}</td>
                    <td>{{this.Q}}</td>
                    <td>{{this.dbGain}}</td>
                  </tr>
                {{/each}}
                <tr>
                  <td class="has-text-centered" colspan="4">
                    <button class="button is-info is-light" id="modal-eq-{{../id}}">Details</button>
                    <a class="button is-link is-light" href="{{this.url}}">Download</a>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        {{/each}}
        {{/if}}
      </table>
    </script>

    <div class="section">
      <!-- Speakers -->
      <div class="searchresults">
        <div class="columns is-multiline is-mobile is-centered is-variable" id="speakers" data-num="0">
          <script type="module" src="./assets/eqs.js"></script>
        </div>
      </div>
    </div>

    <%include file="search.html"/>
    <%include file="footer.html"/>

  </body>
</html>
